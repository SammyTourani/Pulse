# Pulse AI Secretary Environment Configuration
# Copy this file to .env and fill in your actual values

# =============================================================================
# n8n Configuration
# =============================================================================

# Basic authentication for n8n web interface (required)
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=your-secure-password-here

N8N_USER_MANAGEMENT_DISABLED=true

# Security settings (optional, recommended for production)
N8N_SECURE_COOKIE=false
N8N_DISABLE_PRODUCTION_MAIN_PROCESS=false
N8N_DISABLE_UI=false

# Enable metrics endpoint for monitoring (optional)
N8N_METRICS=true

# =============================================================================
# Database Configuration
# =============================================================================

# PostgreSQL database settings (required)
DB_POSTGRESDB_HOST=postgres
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_DATABASE=n8n
DB_POSTGRESDB_USER=n8n
DB_POSTGRESDB_PASSWORD=your-db-password-here

# =============================================================================
# Google Services Configuration
# =============================================================================

# Google Gemini API key (required)
# Get from: https://ai.google.dev/
# Free tier: 1M tokens/day
GEMINI_API_KEY=your-gemini-api-key-here

# Gemini model configuration
GEMINI_DEFAULT_MODEL=gemini-1.5-flash-latest

# Gmail OAuth2 credentials (required)
# Get from: https://console.cloud.google.com/
# Note: Testing mode limited to 100 users
GOOGLE_CLIENT_ID=your-google-client-id-here
GOOGLE_CLIENT_SECRET=your-google-client-secret-here

# Google Calendar configuration
GOOGLE_CALENDAR_ID=primary

# =============================================================================
# Twilio SMS Configuration
# =============================================================================

# Twilio account credentials (required)
# Get from: https://console.twilio.com/
TWILIO_ACCOUNT_SID=your-twilio-account-sid-here
TWILIO_AUTH_TOKEN=your-twilio-auth-token-here

# Twilio phone number for sending SMS (required)
# Format: +1234567890
TWILIO_FROM_NUMBER=+1234567890

# =============================================================================
# User Configuration
# =============================================================================

# Your phone number for SMS notifications (required)
# Format: +1234567890
USER_PHONE_NUMBER=+1234567890

# =============================================================================
# Brick Layer Configuration
# =============================================================================

# =============================================================================
# Pulse Gateway Configuration  
# =============================================================================

# HMAC secret for Pulse Gateway signature verification (required)
# This is used to authenticate requests between the TypeScript client and gateway
# Generate with: openssl rand -hex 32
PULSE_HMAC_SECRET=a1b2c3d4e5f6789012345678901234567890abcdef1234567890abcdef123456

# =============================================================================
# Redis Configuration
# =============================================================================

# Redis connection settings (required for rate limiting)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password-here

# =============================================================================
# SMS Rate Limiting
# =============================================================================

# Daily SMS sending limit (required for production safety)
# Prevents accidental high SMS charges and API abuse
# Recommended: 50 for personal use, adjust based on your needs
SMS_DAILY_LIMIT=50

# Maximum SMS per workflow run (required for burst protection)
# Prevents spam if multiple emails arrive simultaneously
# Recommended: 3 (covers most legitimate use cases)
SMS_PER_RUN_LIMIT=3

# =============================================================================
# Health Check Configuration
# =============================================================================

# Health check server port (optional, default: 3001)
HEALTHZ_PORT=3001

# =============================================================================
# System Configuration
# =============================================================================

# Timezone setting (optional, default: UTC)
GENERIC_TIMEZONE=UTC

# =============================================================================
# Production Deployment Configuration
# =============================================================================

# Domain configuration for auto-TLS (required for production)
DOMAIN=pulse.yourdomain.com
ADMIN_EMAIL=admin@yourdomain.com

# Production security settings (uncomment for production)
# N8N_SECURE_COOKIE=true
# N8N_DISABLE_UI=true
# N8N_COOKIES_SECURE=true

# =============================================================================
# Security Configuration (Requirements 2.1, 2.2, 2.3, 2.4)
# =============================================================================

# Encryption key for credential storage (required for production)
# Generate a secure 32+ character key: openssl rand -hex 32
# IMPORTANT: Keep this secret and never commit to version control
N8N_ENCRYPTION_KEY=your-encryption-key-here

# OAuth2 Security Configuration
OAUTH_REDIRECT_URI=http://localhost:5678/rest/oauth2-credential/callback

# Environment and logging
NODE_ENV=development
LOG_LEVEL=info

# Data Retention Policies (Requirement 2.3)
# Execution data retention (hours) - 168 = 7 days
EXECUTIONS_DATA_MAX_AGE=168
EXECUTIONS_DATA_PRUNE=true

# Binary data TTL (hours) - 24 = 1 day
N8N_BINARY_DATA_TTL=24

# Privacy Settings (Requirement 2.3)
# Disable telemetry and data collection
N8N_DIAGNOSTICS_ENABLED=false
N8N_VERSION_NOTIFICATIONS_ENABLED=false
N8N_PERSONALIZATION_ENABLED=false

# Session Security
N8N_SESSION_COOKIE_SECURE=false
N8N_SESSION_COOKIE_SAME_SITE=lax

# Security Monitoring
N8N_SECURITY_AUDIT_EVENTS=true

# =============================================================================
# Production Security Notes
# =============================================================================

# For production deployment:
# 1. Set N8N_SECURE_COOKIE=true
# 2. Set N8N_DISABLE_UI=true (disables credential editing)
# 3. Use strong passwords and rotate regularly
# 4. Consider using Docker secrets for sensitive values
# 5. Enable auto-TLS with Caddy + Let's Encrypt
# 6. Set up proper firewall rules
# 7. Monitor logs and health endpoints
# 8. Use docker-compose.prod.yml for production deployment

# =============================================================================
# API Rate Limits & Quotas
# =============================================================================

# Google Gemini Free Tier:
# - 1M tokens per day
# - 15 requests per minute
# - Target <3s response time (95th percentile)

# Gmail API Quotas:
# - 1B quota units per day
# - 250 quota units per user per second

# Twilio Trial Account:
# - Limited SMS credits
# - Verified phone numbers only